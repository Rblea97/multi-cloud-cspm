[pytest]
pythonpath = src
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts = -v --cov=src/cspm --cov-report=term-missing --cov-fail-under=80
asyncio_mode = auto
markers =
    unit: Unit tests with mocks (fast, always run)
    integration: Integration tests with in-memory DB (medium)
    aws: Tests requiring real AWS credentials (slow, opt-in)
    azure: Tests requiring real Azure credentials (slow, opt-in)
    real: Tests requiring any real cloud provider (slow, opt-in)
    remediation: Tests that modify cloud resources (requires approval)
    expensive: Tests that may incur significant cloud costs
    free: Tests using only free-tier resources (no cost)
